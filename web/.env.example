# ============================================================================
# APPLICATION
# ============================================================================
APP_NAME=SLIMS
APP_URL=http://localhost:3000
APP_VERSION=0.1.0
APP_SUPPORT_EMAIL=support@slims.edu.ng
NODE_ENV=development
LOG_LEVEL=info

# ============================================================================
# DATABASE
# ============================================================================
DATABASE_URL=postgresql://admin:password@localhost:5432/dojo-slims

# ============================================================================
# REDIS
# ============================================================================
REDIS_URL=redis://localhost:6379

# ============================================================================
# RATE LIMITING
# ============================================================================
# Enable/disable rate limiting
RATE_LIMIT_ENABLED=true

# Redis URL for rate limiting (defaults to REDIS_URL if not set)
# RATE_LIMIT_REDIS_URL=redis://localhost:6379

# Default rate limit window in milliseconds (default: 60000ms = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Default maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Skip counting successful responses (2xx) towards rate limit
RATE_LIMIT_SKIP_SUCCESS_RESPONSES=false

# ============================================================================
# CSRF PROTECTION
# ============================================================================
# IMPORTANT: Generate a strong random secret for production
# Command: openssl rand -hex 32
# NEVER use the default value in production!
CSRF_SECRET=super-secret-development
CSRF_COOKIE_NAME=csrf-token
CSRF_CLIENT_COOKIE_NAME=csrf-client-token
CSRF_TOKEN_EXPIRY_M=60

# ============================================================================
# WORKER QUEUE (BullMQ)
# ============================================================================
WORKER_REDIS_URL=redis://localhost:6379
WORKER_DEFAULT_QUEUE=dojo-slims
WORKER_CONCURRENCY=5
WORKER_LIMITER_MAX=10
WORKER_LIMITER_DURATION=1000

# ============================================================================
# AUTHENTICATION (Better Auth)
# ============================================================================
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=super-secret-development-key
BETTER_AUTH_URL=http://localhost:3000
BETTER_AUTH_MAGIC_LINK_EXPIRY_M=15

# ============================================================================
# SUPER ADMIN (Auto-created on startup)
# ============================================================================
# Super admin credentials - change these in production!
SUPERADMIN_EMAIL=superadmin@slims.edu.ng
SUPERADMIN_PASSWORD=SuperAdmin@123
SUPERADMIN_NAME=Super Admin
SUPERADMIN_USERNAME=SUPERADMIN

# ============================================================================
# EMAIL / SMTP
# ============================================================================
# Configure your SMTP server settings
# Examples:
# - Gmail: smtp.gmail.com:587 (Enable "App Password" for authentication)
# - SendGrid: smtp.sendgrid.net:587 (Use "apikey" as SMTP_USER)
# - AWS SES: email-smtp.us-east-1.amazonaws.com:587
# - Resend: smtp.resend.com:587 (Use "resend" as SMTP_USER)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Email sender information
SMTP_FROM_NAME=SLIMS
SMTP_FROM_EMAIL=noreply@slims.edu.ng

# ============================================================================
# FILE UPLOADS & SECURITY
# ============================================================================
# Base upload directory (MUST be outside public/ for security)
BASE_UPLOAD_PATH=./upload

# File size limits (in bytes)
MAX_FILE_SIZE=5242880

# Allowed MIME types (comma-separated)
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp

# Blacklisted MIME types for security (comma-separated)
BLACKLISTED_MIME_TYPES=application/x-executable,application/x-msdownload,application/x-sh,text/x-php,application/x-httpd-php,application/javascript,text/javascript

# Allowed file extensions (comma-separated)
ALLOWED_FILE_EXTENSIONS=jpg,jpeg,png,gif,webp

# Enable magic number validation (recommended: true)
UPLOAD_ENABLE_MAGIC_NUMBER_CHECK=true

# Enable image processing/sanitization (recommended: true)
UPLOAD_ENABLE_IMAGE_PROCESSING=true

# Image processing settings
UPLOAD_MAX_IMAGE_WIDTH=2000
UPLOAD_MAX_IMAGE_HEIGHT=2000
UPLOAD_IMAGE_QUALITY=90

# Rate limiting for uploads
UPLOAD_RATE_LIMIT_MAX=10
UPLOAD_RATE_LIMIT_WINDOW_MS=60000

# User storage quota (in MB)
UPLOAD_USER_QUOTA_MB=100

# ============================================================================
# SECURITY & CORS
# ============================================================================
# Comma-separated list of allowed origins (supports wildcards)
# Examples: http://localhost:3000,https://*.example.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Enable HTTP Strict Transport Security (recommended for production)
SECURITY_ENABLE_HSTS=false

# Enable Content Security Policy
SECURITY_ENABLE_CSP=true

# Optional: CSP violation report endpoint
# SECURITY_CSP_REPORT_URI=https://your-domain.com/api/csp-report

# ============================================================================
# API & POLLING
# ============================================================================
# Polling configuration for long-running operations
QUERY_POLLING_INTERVAL_MS=1000
QUERY_MAX_POLLING_ATTEMPTS=30

# ============================================================================
# EXPORT SYSTEM
# ============================================================================
# JWT secret for signed export URLs (REQUIRED in production)
# Generate with: openssl rand -hex 32
# NEVER use a weak secret in production!
EXPORT_TOKEN_SECRET=

# Default expiry time for export download links (in minutes)
EXPORT_DEFAULT_EXPIRY_MINUTES=15

# Maximum age for export files before cleanup (in hours)
EXPORT_MAX_FILE_AGE_HOURS=24

# ============================================================================
# CLIENT ENVIRONMENT VARIABLES (NEXT_PUBLIC_*)
# ============================================================================
# These are exposed to the browser
NEXT_PUBLIC_APP_NAME=SLIMS
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_VERSION=0.1.0

NEXT_PUBLIC_LOG_LEVEL=info

NEXT_PUBLIC_CSRF_COOKIE_NAME=csrf-client-token

# Client-side polling configuration (fallback to server-side values)
NEXT_PUBLIC_QUERY_POLLING_INTERVAL_MS=1000
NEXT_PUBLIC_QUERY_MAX_POLLING_ATTEMPTS=30
